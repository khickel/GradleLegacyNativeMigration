import dev.nokee.language.cpp.CppHeaderSet
import dev.nokee.language.c.CHeaderSet

plugins {
    id 'dev.nokee.native-application'
    id 'dev.nokee.cpp-language'
}

application(withDefaultApplicationConfiguration())
application { app->

    // Set the executable filename
    // TODO(nokeedev): Support base name on the extension
    //    baseName = 'win_mfc_a'

    sources {
        cpp { from(fileTree(dir: '.', include: '*.cpp')) }
    }

    addVSCompilerOption("/D_WINDOWS", "/D_MBCS", "/DStandard",
                        '/I' + System.getenv('VCToolsInstallDir') + 'atlmfc\\include',
                        '/I' + System.getenv('VCToolsInstallDir') + 'atlmfc\\include')(app)

    addWindowsResourceFile(project.objects, 'win_mfc_a')(app)

    buildWithAFX()(app)
}

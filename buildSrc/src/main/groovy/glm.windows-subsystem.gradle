project.ext.windowsSubsystem = "windows"

tasks.withType(AbstractLinkTask).configureEach { task ->
    task.linkerArgs.addAll(task.toolChain.map {
        if (it instanceof VisualCpp) {
            return ["/subsystem:${project.ext.windowsSubsystem}".toString()]
        }
        return []
    })
}
import static ConfigurationUtils.withDefaultLibraryConfiguration

plugins {
    id 'dev.nokee.c-library'
}

library(withDefaultLibraryConfiguration())
library { lib->
    targetLinkages = [linkages.static]

    cSources.from(fileTree(dir: ".", include: "*.c"))
    publicHeaders.from(projectDir)

    // TODO-KFH temp change to try to figure out what is bringing in DriverSpec.h
    // TODO(nokeedev): Figuring out where a header comes from should be made easy with Nokee by exposing the data it already acquire during compilation
    //    This is a common question in the native ecosystem.
//    binaries.configureEach {
//        compileTasks.configureEach {
//            compilerArgs.add('/showIncludes')
//        }
//    }
}
